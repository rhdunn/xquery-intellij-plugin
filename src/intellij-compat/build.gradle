ext.intellij_version = project.property('idea_since_build')
ext.intellij_type = project.property('idea_type')

version = ext.intellij_version

if (ext.intellij_version >= 211) {
    sourceSets.main.java.srcDirs += 'src/211/native'
} else {
    sourceSets.main.java.srcDirs += 'src/211/compat'
}

if (ext.intellij_version >= 212) {
    sourceSets.main.java.srcDirs += 'src/212/native'
} else {
    sourceSets.main.java.srcDirs += 'src/212/compat'
}

// Microservices

sourceSets.main.java.srcDirs += 'src/microservices/api'

if (ext.intellij_type == 'IU') {
    sourceSets.main.java.srcDirs += 'src/microservices/203'
} else {
    sourceSets.main.java.srcDirs += 'src/microservices/compat'
}
